# 应用名称

- ShiTu Image Manager

# 依赖

- PyQt5

# 安装依赖

```bash
pip install PyQt5
```

# 文档说明

- devel_doc：开发和测试文档
- mod：模块文档，主要源代码
- resource：图标，来源 ElSeg
- ui：qt designer 界面文档

# 已知缺陷

- Linux 系统无法开启输入法，暂时解决方案用其它文本编辑器输入中文，然后粘贴。原因是 PyQt5 库造成的。

# 其它系统测试

- 上面已知缺陷的开启输入法，输入中文

# 前端开发手册

## 图像库目录结构

- 和后端接口API定义中的目录结构一样并统一路径名，例如：image_list.txt 和 images 固定文件名
- image_list.txt：图像列表，每行：image_path label。由前端生成及修改。后端只读
- images：图像存储目录，由前端生成及增删查等操作。后端只读

## 图片命名规则

- 统一存储在 images 目录
- 文件名规则：{图片MD5值}.{扩展名}

## 修改后端接口API建议

- 由于 image_list.txt 为固定名，是否只传 {index_root} 即可？
- image_list.txt 可以拼接得到 {index_root}/image_list.txt
- 如果要更改建议再以后的版本中更改，此版本不更改
- 此版本不更改的原因：1 时间，2 用户不参与交互，以后更改用户体验没有差别

# 测试图片

- 测试图片在: devel_doc/test_img，来源 [瓶装饮料数据下载链接](https://paddle-imagenet-models-name.bj.bcebos.com/dygraph/rec/data/drink_dataset_v1.0.tar)，只保留少量数据

# 演示指南

## 前期提示

- 只有前端程序，不包含后端，需要启动后端程序
- 前端默认连接的后端：host "localhost"，port 8000
- 不打开图像库，不会弹出分类列表和图像列表相关的“右键菜单”
- 上面左数第1个按钮弹出“应用菜单”，**重要**

## 图像库目录解释

- 符合后端接口API定义中的目录结构的本地目录

## 新建图像库

- 应用菜单-》新建图像库
- 选择一个 **空目录** 或者新建目录，点击 “open” 或者 “打开”
- 如果选择的目录不是空目录，则新建图像库失败

## 打开图像库

- 应用菜单-》打开图像库
- 选择一个图像库目录，点击 “open” 或者 “打开”

## 保存图像库

- 应用菜单-》保存图像库

## 新建/重建 索引库

- 应用菜单-》新建/重建 索引库
- 此操作后续要连接后端服务器
- 后端 API：new_index

## 打开索引库

- 应用菜单-》打开索引库
- 此操作后续要连接后端服务器
- 后端 API：open_index

## 更新索引库

- 应用菜单-》更新索引库
- 此操作后续要连接后端服务器
- 后端 API：update_images
